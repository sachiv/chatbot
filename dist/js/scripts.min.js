function addMessage(e,a,t){if("sent"==e||"received"==e){var s,r;if("received"===e)s=bot_avatar_img_url,r=t||t;else{if(r=guest_name,a||(a=myMessagebar.value().trim()),0===a.length)return;myMessagebar.clear()}myMessages.addMessage({text:a,type:e,avatar:s,name:r,day:!conversationStarted&&"Today",time:!conversationStarted&&(new Date).getHours()+":"+(new Date).getMinutes()}),conversationStarted=!0,"sent"===e&&askChatbot(a)}}function askChatbot(e){$$.get(apiURL,{apiKey:apiKey,chatBotID:chatBotID,externalID:guest_name,message:e},function(e){(e=JSON.parse(e)).success?(chatBotName=e.message.chatBotName,addMessage("received",e.message.message,chatBotName)):addMessage("received",e.errorType+" :: "+e.errorMessage,chatBotName)})}var bot_avatar_img_url="dist/images/bot-avatar.png",chatBotName="Cyborg",guest_name="Guest",apiURL="https://www.personalityforge.com/api/chat/",apiKey="__YOUR__KEY__",chatBotID="63906",myApp=new Framework7,$$=Dom7,conversationStarted=!1,myMessages=myApp.messages(".messages",{autoLayout:!0}),myMessagebar=myApp.messagebar(".messagebar",{maxHeight:200});$$(".messagebar .link").on("click",function(){addMessage("sent")});